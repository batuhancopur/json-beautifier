{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Sparkles,Download,Upload,Trash2,Copy,FileText,CheckCircle,AlertCircle}from'lucide-react';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[inputJson,setInputJson]=useState('');const[outputJson,setOutputJson]=useState('');const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');const[copied,setCopied]=useState(false);// Browser close detection and graceful shutdown\nuseEffect(()=>{const handleBeforeUnload=async()=>{try{// Send shutdown request to server\nawait fetch('/api/shutdown',{method:'POST',keepalive:true// Ensures request completes even if page is unloading\n});}catch(error){// Ignore errors during shutdown\nconsole.log('Shutdown request sent');}};const handleVisibilityChange=()=>{if(document.visibilityState==='hidden'){// Page is being hidden (tab switch, minimize, etc.)\n// Don't shutdown immediately, just log\nconsole.log('Page hidden');}};// Add event listeners\nwindow.addEventListener('beforeunload',handleBeforeUnload);document.addEventListener('visibilitychange',handleVisibilityChange);// Cleanup function\nreturn()=>{window.removeEventListener('beforeunload',handleBeforeUnload);document.removeEventListener('visibilitychange',handleVisibilityChange);};},[]);const beautifyJson=async()=>{if(!inputJson.trim()){setError('Please enter some JSON to beautify');return;}setIsLoading(true);setError('');setSuccess('');try{const response=await axios.post('/api/beautify',inputJson,{headers:{'Content-Type':'application/json'}});setOutputJson(response.data.beautifiedJson);setSuccess('JSON beautified successfully!');}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Failed to beautify JSON. Please check your input.');}finally{setIsLoading(false);}};const handleFileUpload=event=>{const file=event.target.files[0];if(!file)return;const reader=new FileReader();reader.onload=e=>{setInputJson(e.target.result);setError('');setSuccess('');};reader.readAsText(file);};const downloadJson=()=>{if(!outputJson){setError('No beautified JSON to download');return;}const blob=new Blob([outputJson],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='beautified.json';document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);setSuccess('File downloaded successfully!');};const copyToClipboard=async()=>{if(!outputJson){setError('No beautified JSON to copy');return;}try{await navigator.clipboard.writeText(outputJson);setCopied(true);setSuccess('Copied to clipboard!');setTimeout(()=>setCopied(false),2000);}catch(err){setError('Failed to copy to clipboard');}};const clearAll=()=>{setInputJson('');setOutputJson('');setError('');setSuccess('');setCopied(false);};const loadSampleJson=()=>{const sampleJson=\"{\\\"name\\\":\\\"John Doe\\\",\\\"age\\\":30,\\\"email\\\":\\\"john@example.com\\\",\\\"address\\\":{\\\"street\\\":\\\"123 Main St\\\",\\\"city\\\":\\\"New York\\\",\\\"zip\\\":\\\"10001\\\"},\\\"hobbies\\\":[\\\"reading\\\",\\\"swimming\\\",\\\"coding\\\"],\\\"active\\\":true}\";setInputJson(sampleJson);setError('');setSuccess('');};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"JSON Beautifier\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Format and beautify your JSON data with ease\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Input JSON\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea\",value:inputJson,onChange:e=>setInputJson(e.target.value),placeholder:\"Paste your JSON here or upload a file...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn\",onClick:beautifyJson,disabled:isLoading,children:[isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\"}):/*#__PURE__*/_jsx(Sparkles,{size:18}),isLoading?'Beautifying...':'Beautify JSON']}),/*#__PURE__*/_jsxs(\"label\",{className:\"btn btn-secondary\",children:[/*#__PURE__*/_jsx(Upload,{size:18}),\"Upload File\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".json,.txt\",onChange:handleFileUpload,style:{display:'none'}})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary\",onClick:loadSampleJson,children:[/*#__PURE__*/_jsx(FileText,{size:18}),\"Load Sample\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary\",onClick:clearAll,children:[/*#__PURE__*/_jsx(Trash2,{size:18}),\"Clear All\"]})]})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[/*#__PURE__*/_jsx(AlertCircle,{size:16,style:{marginRight:'8px'}}),error]}),success&&/*#__PURE__*/_jsxs(\"div\",{className:\"success\",children:[/*#__PURE__*/_jsx(CheckCircle,{size:16,style:{marginRight:'8px'}}),success]}),outputJson&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Beautified JSON\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea\",value:outputJson,readOnly:true,placeholder:\"Beautified JSON will appear here...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn\",onClick:copyToClipboard,children:[copied?/*#__PURE__*/_jsx(CheckCircle,{size:18}):/*#__PURE__*/_jsx(Copy,{size:18}),copied?'Copied!':'Copy to Clipboard']}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary\",onClick:downloadJson,children:[/*#__PURE__*/_jsx(Download,{size:18}),\"Download JSON\"]})]})]})]});}export default App;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}